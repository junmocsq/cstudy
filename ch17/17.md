# 17.指针的高级应用
- 动态存储分配：在程序执行期间分配内存单元的能力。
- 内存分配stdlib.h。获得的内存块来自于堆heap的存储池
  - malloc：分配内存块，不初始化
  - calloc：分配内存块，初始化清零
  - realloc：调整先前分配的内存块大小 void *realloc(void *ptr,size_t size)
    - 当扩展内存块时，不会对新添加的字节进行初始化
    - 当不能按要求扩大内存块时，返回空指针，并且原数据块中的数据不会改变
    - 如果以NULL为第一个参数，和malloc一样
    - 如果第二个参数为0，那么会释放掉内存块
- 空指针（null pointer）：不指向任何地方的指针。在把函数的返回值存储到指针变量中以后，`需要判断该指针是否为空指针。`
- 释放存储空间 free
- `悬空指针：调用 free(p) 函数会释放 p 指向的内存块，但不会改变p本身，此时修改和访问p都会导致未定义行为。`
- C99受限指针（restricted pointer）：int *restrict p。如果指针p指向的对象在之后需要修改，那么该对象不会允许除指针p之外的任何方式访问（其他访问对象的方式包括让两一个指针指向同一个对象，或者让指针p指向命名变量）。
- C99灵活数组成员：灵活数组成员必须出现在结构体的最后，而且结构必须至少还有一个其他成员。
    - 复制包含灵活数组成员的结构时，其他成员都会被复制但不复制灵活数组成员
    - 具有灵活数组成员的结构时不完整类型（incomplete type）。不完整类型缺少用于确定所需内存大小的信息。
    - 不完整类型不能作为其他结构的成员和数组的元素，但是数组可以包含指向具有灵活数组成员的结构的指针。
```
struct vstring{
    int len;
    char chars[]; // 灵活数组成员
}
```
- 空指针为0的指针，但是地址不一定为0，因为不是所有编译器都使用零地址。例如，一些编译器使用不存在的内存地址，这样硬件就能检查出试图使用空指针访问内存的方式。